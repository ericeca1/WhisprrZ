(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,a,t){"use strict";t.r(a);var n=t(10),r=t(11),l=t(13),i=t(12),s=t(14),o=t(0),c=t.n(o),d=t(15),m=t.n(d),p=(t(41),t(2)),u=(t(42),t(130)),h=t(131),f=t(132),g=t(133),v=t(145),b=t(134),w=t(135),M=t(136),x=t(137),y=t(138),E=t(139),S=function(e){function a(e){var t,r=e.mesh;Object(n.a)(this,a),(t=Object(l.a)(this,Object(i.a)(a).call(this))).toggle=function(){t.setState(function(e){return{collapse:!e.collapse}})},t.changeScale=function(e){var a=e.target.value;t.setState(function(e){return{scale:a}}),t.mesh.scale.set(a,a,a),t.mesh.userData.scale=a},t.changeBuffer=function(e){var a=e.target.value;t.setState(function(e){return{buffer:a}}),t.mesh.userData.buffer=a},t.changeSide=function(e){var a=parseInt(e.target.value);t.setState(function(e){return{side:a}}),t.mesh.basicMaterial.side=a,t.mesh.shaderMaterial.side=a,t.mesh.userData.side=a},t.changeShadows=function(e){var a=e.target.value;t.setState(function(e){return{shadows:a}}),t.mesh.userData.shadows=a},t.changeMap=function(e){var a=e.target.files;if(a.length){var n=a[0],r=n.name,l=new FileReader,i=new Image,s=new p.Texture(i);s.wrapS=s.wrapT=p.RepeatWrapping,i.onload=function(){s.needsUpdate=!0},l.addEventListener("load",function(e){i.src=e.target.result},!1),l.readAsDataURL(n),t.mesh.basicMaterial.map=s,t.mesh.basicMaterial.needsUpdate=!0,t.mesh.shaderMaterial.uniforms.map.value=s,t.setState(function(e){return{map:r}}),t.mesh.userData.map=r,e.target.value=""}},t.changeAlpha=function(e){var a=e.target.files;if(a.length){var n=a[0],r=n.name,l=new FileReader,i=new Image,s=new p.Texture(i);s.wrapS=s.wrapT=p.RepeatWrapping,i.onload=function(){s.needsUpdate=!0},l.addEventListener("load",function(e){i.src=e.target.result},!1),l.readAsDataURL(n),t.mesh.basicMaterial.alphaMap=s,t.mesh.basicMaterial.transparent=!0,t.mesh.basicMaterial.needsUpdate=!0,t.setState(function(e){return{alpha:r}}),t.setState(function(e){return{transparent:"1"}}),t.mesh.userData.alpha=r,t.mesh.userData.transparent="1",e.target.value=""}},t.changeLightMap=function(e){var a=e.target.files;if(a.length){var n=a[0],r=n.name,l=new FileReader,i=new Image,s=new p.Texture(i);s.wrapS=s.wrapT=p.RepeatWrapping,i.onload=function(){s.needsUpdate=!0},l.addEventListener("load",function(e){i.src=e.target.result},!1),l.readAsDataURL(n),t.mesh.basicMaterial.lightMap=s,t.mesh.basicMaterial.needsUpdate=!0,t.mesh.shaderMaterial.uniforms.lightMap.value=s,t.mesh.shaderMaterial.defines.USE_LIGHTMAP=!0,t.mesh.shaderMaterial.needsUpdate=!0,t.setState(function(e){return{lightMap:r}}),t.mesh.userData.lightmap=r,e.target.value=""}},t.changeAlphaTest=function(e){var a=e.target.value;t.setState(function(e){return{alphaTest:a}}),t.mesh.basicMaterial.alphaTest=a,t.mesh.userData.alphaTest=a},t.changeTransparent=function(e){var a=parseInt(e.target.value);t.setState(function(e){return{transparent:a}}),t.mesh.basicMaterial.transparent=!(!a&&!t.state.alpha),t.mesh.basicMaterial.needsUpdate=!0,t.mesh.userData.transparent=a},t.changeColor=function(e){var a=e.target.value;t.setState(function(e){return{color:a}}),t.mesh.basicMaterial.color.set(parseInt(a,16)),t.mesh.userData.color=a},t.changeCollider=function(e){var a=e.target.value;t.setState(function(e){return{collider:a}}),"1"===a?t.setState(function(e){return{buffer:"0"}}):t.setState(function(e){return{buffer:"1"}}),t.mesh.basicMaterial.wireframe="1"==a,t.mesh.basicMaterial.needsUpdate=!0,t.mesh.userData.collider=a},t.changeWireframe=function(e){var a=e.target.value;t.setState(function(e){return{wireframe:a}}),t.mesh.basicMaterial.wireframe="1"===a||"1"==t.state.collider,t.mesh.basicMaterial.needsUpdate=!0,t.mesh.userData.wireframe=a},t.changeOpacity=function(e){var a=e.target.value;t.setState(function(e){return{opacity:a}}),t.mesh.basicMaterial.opacity=a,t.mesh.userData.opacity=a},t.changePosX=function(e){var a=e.target.value;t.setState(function(e){return{pos:[a,t.state.pos[1],t.state.pos[2]]}}),t.mesh.position.x=a,t.mesh.userData.pos[0]=a},t.changePosY=function(e){var a=e.target.value;t.setState(function(e){return{pos:[t.state.pos[0],a,t.state.pos[2]]}}),t.mesh.position.z=a,t.mesh.userData.pos[1]=a},t.changePosZ=function(e){var a=e.target.value;t.setState(function(e){return{pos:[t.state.pos[0],t.state.pos[1],a]}}),t.mesh.position.y=a,t.mesh.userData.pos[2]=a},t.changeRotX=function(e){var a=e.target.value;t.setState(function(e){return{rot:[a,t.state.rot[1],t.state.rot[2]]}}),t.mesh.rotation.x=a/180*Math.PI,t.mesh.userData.rot[0]=a},t.changeRotY=function(e){var a=e.target.value;t.setState(function(e){return{pos:[t.state.rot[0],a,t.state.rot[2]]}}),t.mesh.rotation.y=a/180*Math.PI,t.mesh.userData.rot[1]=a},t.changeRotZ=function(e){var a=e.target.value;t.setState(function(e){return{pos:[t.state.rot[0],t.state.rot[1],a]}}),t.mesh.rotation.z=a/180*Math.PI,t.mesh.userData.rot[2]=a},t.changeVisible=function(e){var a=e.target.value;t.setState(function(e){return{visisble:a}}),t.mesh.visible="1"==a},t.changeMixMap=function(e){var a=e.target.files;if(a.length){var n=a[0],r=n.name,l=new FileReader,i=new Image,s=new p.Texture(i);s.wrapS=s.wrapT=p.RepeatWrapping,i.onload=function(){s.needsUpdate=!0},l.addEventListener("load",function(e){i.src=e.target.result},!1),l.readAsDataURL(n),t.mesh.shaderMaterial.uniforms.mixMap.value=s,t.mesh.material=t.mesh.shaderMaterial,t.setState(function(e){return{mixMap:r}}),t.mesh.userData.mixmap=r,e.target.value=""}},t.changeAddMap1=function(e){var a=e.target.files;if(a.length){var n=a[0],r=n.name,l=new FileReader,i=new Image,s=new p.Texture(i);s.wrapS=s.wrapT=p.RepeatWrapping,i.onload=function(){s.needsUpdate=!0},l.addEventListener("load",function(e){i.src=e.target.result},!1),l.readAsDataURL(n),t.mesh.shaderMaterial.uniforms.addMap1.value=s,t.setState(function(e){return{addMap1:r}}),t.mesh.userData.addmap1=r,e.target.value=""}},t.changeAddMap2=function(e){var a=e.target.files;if(a.length){var n=a[0],r=n.name,l=new FileReader,i=new Image,s=new p.Texture(i);s.wrapS=s.wrapT=p.RepeatWrapping,i.onload=function(){s.needsUpdate=!0},l.addEventListener("load",function(e){i.src=e.target.result},!1),l.readAsDataURL(n),t.mesh.shaderMaterial.uniforms.addMap2.value=s,t.setState(function(e){return{addMap2:r}}),t.mesh.userData.addmap2=r,e.target.value=""}},t.changeAddMap3=function(e){var a=e.target.files;if(a.length){var n=a[0],r=n.name,l=new FileReader,i=new Image,s=new p.Texture(i);s.wrapS=s.wrapT=p.RepeatWrapping,i.onload=function(){s.needsUpdate=!0},l.addEventListener("load",function(e){i.src=e.target.result},!1),l.readAsDataURL(n),t.mesh.shaderMaterial.uniforms.addMap3.value=s,t.setState(function(e){return{addMap3:r}}),t.mesh.userData.addmap3=r,e.target.value=""}},t.changeAddMap4=function(e){var a=e.target.files;if(a.length){var n=a[0],r=n.name,l=new FileReader,i=new Image,s=new p.Texture(i);s.wrapS=s.wrapT=p.RepeatWrapping,i.onload=function(){s.needsUpdate=!0},l.addEventListener("load",function(e){i.src=e.target.result},!1),l.readAsDataURL(n),t.mesh.shaderMaterial.uniforms.addMap4.value=s,t.setState(function(e){return{addMap4:r}}),t.mesh.userData.addmap4=r,e.target.value=""}};var s=0,o={};for(var c in r.userData)s++,o[c]=r.userData[c];return t.mesh=r,s?t.state=o:(t.state={collapse:!1,scale:"1",buffer:"1",side:"0",shadows:!1,map:null,alpha:null,lightmap:null,alphaTest:"0",transparent:"0",opacity:"1",color:"ffffff",collider:"0",wirframe:"0",pos:[0,0,0],rot:[0,0,0],mixmap:null,addmap1:null,addmap2:null,addmap3:null,addmap4:null},t.mesh.userData={scale:"1",buffer:"1",side:"0",shadows:!1,map:null,alpha:null,lightmap:null,alphaTest:"0",transparent:"0",opacity:"1",color:"ffffff",collider:"0",wirframe:"0",pos:[0,0,0],rot:[0,0,0],mixmap:null,addmap1:null,addmap2:null,addmap3:null,addmap4:null}),t.state.visible=!0,t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(u.a,null,c.a.createElement(h.a,null,c.a.createElement(f.a,null,this.mesh.name),c.a.createElement(f.a,null,"  ",c.a.createElement(g.a,{color:"primary",onClick:this.toggle,style:{marginBottom:"1rem"}},"Options")))),c.a.createElement(v.a,{isOpen:this.state.collapse},c.a.createElement(b.a,null,c.a.createElement(w.a,null,c.a.createElement(M.a,null,c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"buffer"},"Visible"),c.a.createElement(E.a,{type:"select",name:"visible",id:"buffer",onChange:this.changeVisible},c.a.createElement("option",{selected:"1"==this.state.visisble},"1"),c.a.createElement("option",{selected:"0"==this.state.visisble},"0"))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"scale"},"Scale"),c.a.createElement(E.a,{name:"scale",id:"scale",value:this.state.scale,onChange:this.changeScale})),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"buffer"},"BufferGeometry"),c.a.createElement(E.a,{type:"select",name:"buffer",id:"buffer",onChange:this.changeBuffer},c.a.createElement("option",{selected:"1"==this.state.buffer},"1"),c.a.createElement("option",{selected:"0"==this.state.buffer},"0"))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"side"},"Face Side"),c.a.createElement(E.a,{type:"select",name:"side",id:"side",onChange:this.changeSide},c.a.createElement("option",null,"0"),c.a.createElement("option",null,"1"),c.a.createElement("option",null,"2"))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"shadows"},"Floor (shadows)"),c.a.createElement(E.a,{type:"select",name:"shadows",id:"shadows",onChange:this.changeShadows},c.a.createElement("option",null,"0"),c.a.createElement("option",null,"1"))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"map"},"Diffuse map"),c.a.createElement(h.a,null,c.a.createElement(f.a,null,c.a.createElement(E.a,{type:"file",name:"map",id:"map",onChange:this.changeMap,style:{color:"transparent"}})),c.a.createElement(f.a,null,this.mesh.userData.map))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"alpha"},"Alpha map"),c.a.createElement(h.a,null,c.a.createElement(f.a,null,c.a.createElement(E.a,{type:"file",name:"alpha",id:"alpha",onChange:this.changeAlpha,style:{color:"transparent"}})),c.a.createElement(f.a,null,this.mesh.userData.alpha))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"light"},"Light map"),c.a.createElement(h.a,null,c.a.createElement(f.a,null,c.a.createElement(E.a,{type:"file",name:"light",id:"light",onChange:this.changeLightMap,style:{color:"transparent"}})),c.a.createElement(f.a,null,this.mesh.userData.lightmap))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"light"},"Mix map"),c.a.createElement(h.a,null,c.a.createElement(f.a,null,c.a.createElement(E.a,{type:"file",name:"mix",id:"mix",onChange:this.changeMixMap,style:{color:"transparent"}})),c.a.createElement(f.a,null,this.mesh.userData.mixmap))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"light"},"Addition map 1"),c.a.createElement(h.a,null,c.a.createElement(f.a,null,c.a.createElement(E.a,{type:"file",name:"mix",id:"mix",onChange:this.changeAddMap1,style:{color:"transparent"}})),c.a.createElement(f.a,null,this.mesh.userData.addmap1))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"light"},"Addition map 2"),c.a.createElement(h.a,null,c.a.createElement(f.a,null,c.a.createElement(E.a,{type:"file",name:"mix",id:"mix",onChange:this.changeAddMap2,style:{color:"transparent"}})),c.a.createElement(f.a,null,this.mesh.userData.addmap2))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"light"},"Addition map 3"),c.a.createElement(h.a,null,c.a.createElement(f.a,null,c.a.createElement(E.a,{type:"file",name:"mix",id:"mix",onChange:this.changeAddMap3,style:{color:"transparent"}})),c.a.createElement(f.a,null,this.mesh.userData.addmap3))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"light"},"Addition map 4"),c.a.createElement(h.a,null,c.a.createElement(f.a,null,c.a.createElement(E.a,{type:"file",name:"mix",id:"mix",onChange:this.changeAddMap4,style:{color:"transparent"}})),c.a.createElement(f.a,null,this.mesh.userData.addmap4))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"alphaTest"},"alphaTest"),c.a.createElement(E.a,{name:"alphaTest",id:"alphaTest",value:this.state.alphaTest,onChange:this.changeAlphaTest})),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"transparent"},"Transparent"),c.a.createElement(E.a,{type:"select",name:"transparent",id:"transparent",onChange:this.changeTransparent},c.a.createElement("option",{selected:"0"==this.state.transparent},"0"),c.a.createElement("option",{selected:"1"==this.state.transparent},"1"))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"opacity"},"Opacity"),c.a.createElement(E.a,{name:"scale",id:"scale",value:this.state.opacity,onChange:this.changeOpacity})),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"color"},"Color"),c.a.createElement(E.a,{name:"color",id:"color",value:this.state.color,onChange:this.changeColor})),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"collider"},"Collider"),c.a.createElement(E.a,{type:"select",name:"collider",id:"collider",onChange:this.changeCollider},c.a.createElement("option",null,"0"),c.a.createElement("option",null,"1"))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"wireframe"},"Wireframe"),c.a.createElement(E.a,{type:"select",name:"wireframe",id:"wireframe",onChange:this.changeWireframe},c.a.createElement("option",null,"0"),c.a.createElement("option",null,"1"))),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"pos"},"Position"),c.a.createElement(E.a,{name:"posX",id:"posX",value:this.state.pos[0],onChange:this.changePosX}),c.a.createElement(E.a,{name:"posY",id:"posY",value:this.state.pos[1],onChange:this.changePosY}),c.a.createElement(E.a,{name:"posZ",id:"posZ",value:this.state.pos[2],onChange:this.changePosZ})),c.a.createElement(x.a,null,c.a.createElement(y.a,{for:"pos"},"Rotation"),c.a.createElement(E.a,{name:"rotX",id:"rotX",value:this.state.rot[0],onChange:this.changeRotX}),c.a.createElement(E.a,{name:"rotY",id:"rotY",value:this.state.rot[1],onChange:this.changeRotY}),c.a.createElement(E.a,{name:"rotZ",id:"rotZ",value:this.state.rot[2],onChange:this.changeRotZ})))))))}}]),a}(o.Component),T=t(73),U=t(39),D=t(31),O=t.n(D);T(p),U(p);var C=function(e){function a(e){var t,r=e.scene;return Object(n.a)(this,a),(t=Object(l.a)(this,Object(i.a)(a).call(this))).toggle=function(e){var a=e.target.files;if(a.length){var n=a[0],r=n.name,l=r.split(".").pop().toLowerCase(),i=new FileReader,s=t.scene,o=["varying vec2 vUv;","varying vec2 vUv2;","attribute vec2 uv2;","void main( void ) {","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tvUv = uv;","\tvUv2 = uv2;","\tgl_Position = projectionMatrix * mvPosition;","}"].join("\n"),d=["varying vec2 vUv;","varying vec2 vUv2;","uniform sampler2D map;","uniform sampler2D mixMap;","uniform sampler2D addMap1;","uniform sampler2D addMap2;","uniform sampler2D addMap3;","uniform sampler2D addMap4;","uniform sampler2D lightMap;","uniform float lightMapIntensity;","void main( void ) {","\tvec4 textureColor = texture2D(map, vUv);","\tvec4 mmap = texture2D(mixMap, vUv2);","\tvec4 textureColor1 = texture2D(addMap1, vUv);","\tvec4 textureColor2 = texture2D(addMap2, vUv);","\tvec4 textureColor3 = texture2D(addMap3, vUv);","\tvec4 textureColor4 = texture2D(addMap4, vUv);","   vec3 color = textureColor.xyz;","\tcolor = mix( color, textureColor1.xyz, mmap.r );","\tcolor = mix( color, textureColor2.xyz, mmap.g );","\tcolor = mix( color, textureColor3.xyz, mmap.b );","vec3 indirectDiffuse = vec3(1.0);","#ifdef USE_LIGHTMAP","indirectDiffuse = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;","if(indirectDiffuse.x < 0.5) {","   color.x = 2.0 * indirectDiffuse.x * color.x;","}","else {","   color.x = 1.0 - 2.0 * (1.0 - indirectDiffuse.x) * (1.0 - color.x);","}","if(indirectDiffuse.y < 0.5) {","   color.y = 2.0 * indirectDiffuse.y * color.y;","}","else {","   color.y = 1.0 - 2.0 * (1.0 - indirectDiffuse.y) * (1.0 - color.y);","}","if(indirectDiffuse.z < 0.5) {","   color.z = 2.0 * indirectDiffuse.z * color.z;","}","else {","   color.z = 1.0 - 2.0 * (1.0 - indirectDiffuse.z) * (1.0 - color.z);","}","#endif","\tgl_FragColor = vec4(color, 1.0);","}"].join("\n");switch(l){case"dae":i.addEventListener("load",function(e){var a=e.target.result;t.BABYLON=p;var n=(new U).parse(a);for(var l in n.scene.name=r,n.scene.scale.set(1,1,1),n.scene.updateMatrixWorld(!0),n.scene.children)n.scene.children[l].children[0].material=new p.MeshBasicMaterial,n.scene.children[l].children[0].basicMaterial=n.scene.children[l].children[0].material,n.scene.children[l].children[0].shaderMaterial=new p.ShaderMaterial({vertexShader:o,fragmentShader:d,uniforms:{map:{type:"t",value:new p.Texture},lightMap:{type:"t",value:new p.Texture},lightMapIntensity:{type:"f",value:1},mixMap:{type:"t",value:new p.Texture},addMap1:{type:"t",value:new p.Texture},addMap2:{type:"t",value:new p.Texture},addMap3:{type:"t",value:new p.Texture},addMap4:{type:"t",value:new p.Texture}}}),n.scene.children[l].children[0].shaderMaterial.defines.USE_LIGHTMAP=!1,n.scene.children[l].children[0].name=n.scene.children[l].name,n.scene.children[l].children[0].geometry.applyMatrix(n.scene.children[l].children[0].matrixWorld),n.scene.children[l].children[0].position.set(0,0,0),n.scene.children[l].children[0].rotation.set(0,0,0),n.scene.children[l].children[0].scale.set(1,1,1),t.scene.add(n.scene.children[l].children[0]);m.a.render(c.a.createElement("div",null,t.scene.children.map(function(e){return c.a.createElement(S,{key:e.uuid,mesh:e})})),document.getElementById("ui"))},!1),i.readAsText(n);break;case"obj":i.addEventListener("load",function(e){var a=e.target.result;t.BABYLON=p;var n=(new t.BABYLON.OBJLoader).parse(a);for(var l in n.name=r,n.children)n.children[l].material=new p.MeshBasicMaterial,n.children[l].basicMaterial=n.children[l].material,n.children[l].shaderMaterial=new p.ShaderMaterial({vertexShader:o,fragmentShader:d,uniforms:{map:{type:"t",value:new p.Texture},lightMap:{type:"t",value:new p.Texture},lightMapIntensity:{type:"f",value:1},mixMap:{type:"t",value:new p.Texture},addMap1:{type:"t",value:new p.Texture},addMap2:{type:"t",value:new p.Texture},addMap3:{type:"t",value:new p.Texture},addMap4:{type:"t",value:new p.Texture}}}),n.children[l].shaderMaterial.defines.USE_LIGHTMAP=!1,t.scene.add(n.children[l]);m.a.render(c.a.createElement("div",null,t.scene.children.map(function(e){return c.a.createElement(S,{key:e.uuid,mesh:e})})),document.getElementById("ui"))},!1),i.readAsText(n);break;case"zip":i.addEventListener("load",function(e){(new O.a).loadAsync(e.target.result).then(function(e){e.file("assets.js").async("string").then(function(a){var t=JSON.parse(a);console.log(t);var n={},r={},l=new p.JSONLoader,i=0,u=0,h=function(){if(console.log("onLoad",u,i),u==i){for(var e in t){var a=new p.MeshBasicMaterial,l={color:"ffffff",scale:t[e].scale,buffer:t[e].buffer?"1":"0",side:t[e].side,shadows:t[e].shadows?"1":"0",alphaTest:t[e].alphaTest||"0",transparent:t[e].transparent?"1":"0",opacity:t[e].opacity,collider:t[e].collider?"1":"0",wirframe:t[e].wirframe?"1":"0",pos:t[e].pos,rot:t[e].rot},h=new p.ShaderMaterial({vertexShader:o,fragmentShader:d,uniforms:{map:{type:"t",value:new p.Texture},lightMap:{type:"t",value:new p.Texture},lightMapIntensity:{type:"f",value:1},mixMap:{type:"t",value:new p.Texture},addMap1:{type:"t",value:new p.Texture},addMap2:{type:"t",value:new p.Texture},addMap3:{type:"t",value:new p.Texture},addMap4:{type:"t",value:new p.Texture}}});h.defines.USE_LIGHTMAP=!1,t[e].map&&(a.map=r[t[e].map],l.map=t[e].map,h.uniforms.map.value=r[t[e].map]),t[e].mixmap&&(l.mixmap=t[e].mixmap,h.uniforms.mixMap.value=r[t[e].mixmap]),t[e].addmap1&&(l.addmap1=t[e].addmap1,h.uniforms.addMap1.value=r[t[e].addmap1]),t[e].addmap2&&(l.addmap2=t[e].addmap2,h.uniforms.addMap2.value=r[t[e].addmap2]),t[e].addmap3&&(l.addmap3=t[e].addmap3,h.uniforms.addMap3.value=r[t[e].addmap3]),t[e].addmap4&&(l.addmap4=t[e].addmap4,h.uniforms.addMap4.value=r[t[e].addmap4]),t[e].alpha&&(a.alphaMap=r[t[e].alpha],l.alpha=t[e].alpha),t[e].lightmap&&(a.lightMap=r[t[e].lightmap],l.lightmap=t[e].lightmap,h.uniforms.lightMap.value=r[t[e].lightmap],h.defines.USE_LIGHTMAP=!0);var f=new p.Mesh(n[t[e].geo],a);if(f.userData=l,t[e].alphaTest&&(a.alphaTest=t[e].alphaTest),t[e].transparent&&(a.transparent=!0),(t[e].collider||t[e].wireframe)&&(a.wireframe=!0),t[e].side&&(a.side=t[e].side),t[e].scale){var g=t[e].scale;f.scale.set(g,g,g)}var v=l.pos;f.position.fromArray(v);var b=t[e].rot;f.rotation.x=b[0]/180*Math.PI,f.rotation.y=b[1]/180*Math.PI,f.rotation.z=b[2]/180*Math.PI,void 0!==t[e].opacity&&(a.opacity=t[e].opacity),f.basicMaterial=a,f.shaderMaterial=h,l.mixmap&&(f.material=h,console.log(l.mixmap,h)),f.name=e,s.add(f)}m.a.render(c.a.createElement("div",null,s.children.map(function(e){return c.a.createElement(S,{key:e.uuid,mesh:e})})),document.getElementById("ui"))}},f=function(a){i++;var s=t[a];console.log(s),e.folder("geometry").folder("loc").file(t[a].geo).async("string").then(function(e){u++;var a=l.parse(JSON.parse(e));n[s.geo]=new p.BufferGeometry,n[s.geo].fromGeometry(a.geometry),console.log("geo",u),h()}),t[a].map&&(i++,e.folder("textures").folder("loc").file(t[a].map).async("arraybuffer").then(function(e){var a=new Uint8Array(e),t=new Blob([a.buffer]),n=new Image;n.onload=function(){u++,h(),document.body.appendChild(this),console.log("map",u)},n.src=URL.createObjectURL(t),r[s.map]=new p.Texture(n),r[s.map].needsUpdate=!0,r[s.map].wrapS=r[s.map].wrapT=p.RepeatWrapping,r[s.map].blob=t})),t[a].alpha&&(i++,e.folder("textures").folder("loc").file(t[a].alpha).async("arraybuffer").then(function(e){var a=new Uint8Array(e),t=new Blob([a.buffer]),n=new Image;n.onload=function(){u++,h(),document.body.appendChild(this)},n.src=URL.createObjectURL(t),r[s.alpha]=new p.Texture(n),r[s.alpha].needsUpdate=!0,r[s.alpha].wrapS=r[s.alpha].wrapT=p.RepeatWrapping,r[s.alpha].blob=t})),t[a].lightmap&&(i++,e.folder("textures").folder("loc").file(t[a].lightmap).async("arraybuffer").then(function(e){var a=new Uint8Array(e),t=new Blob([a.buffer]),n=new Image;n.onload=function(){u++,h(),document.body.appendChild(this),console.log("lightmap",u)},n.src=URL.createObjectURL(t),r[s.lightmap]=new p.Texture(n),r[s.lightmap].needsUpdate=!0,r[s.lightmap].wrapS=r[s.lightmap].wrapT=p.RepeatWrapping,r[s.lightmap].blob=t})),t[a].mixmap&&(i++,e.folder("textures").folder("loc").file(t[a].mixmap).async("arraybuffer").then(function(e){var a=new Uint8Array(e),t=new Blob([a.buffer]),n=new Image;n.onload=function(){u++,h(),document.body.appendChild(this),console.log("mixmap",u)},n.src=URL.createObjectURL(t),r[s.mixmap]=new p.Texture(n),r[s.mixmap].needsUpdate=!0,r[s.mixmap].wrapS=r[s.mixmap].wrapT=p.RepeatWrapping,r[s.mixmap].blob=t})),t[a].addmap1&&(i++,e.folder("textures").folder("loc").file(t[a].addmap1).async("arraybuffer").then(function(e){var a=new Uint8Array(e),t=new Blob([a.buffer]),n=new Image;n.onload=function(){u++,h(),document.body.appendChild(this),console.log("addmap1",u)},n.src=URL.createObjectURL(t),r[s.addmap1]=new p.Texture(n),r[s.addmap1].needsUpdate=!0,r[s.addmap1].wrapS=r[s.addmap1].wrapT=p.RepeatWrapping,r[s.addmap1].blob=t})),t[a].addmap2&&(i++,e.folder("textures").folder("loc").file(t[a].addmap2).async("arraybuffer").then(function(e){var a=new Uint8Array(e),t=new Blob([a.buffer]),n=new Image;n.onload=function(){u++,h(),document.body.appendChild(this),console.log("addmap2",u)},n.src=URL.createObjectURL(t),r[s.addmap2]=new p.Texture(n),r[s.addmap2].needsUpdate=!0,r[s.addmap2].wrapS=r[s.addmap2].wrapT=p.RepeatWrapping,r[s.addmap2].blob=t})),t[a].addmap3&&(i++,e.folder("textures").folder("loc").file(t[a].addmap3).async("arraybuffer").then(function(e){var a=new Uint8Array(e),t=new Blob([a.buffer]),n=new Image;n.onload=function(){u++,h(),document.body.appendChild(this),console.log("addmap3",u)},n.src=URL.createObjectURL(t),r[s.addmap3]=new p.Texture(n),r[s.addmap3].needsUpdate=!0,r[s.addmap3].wrapS=r[s.addmap3].wrapT=p.RepeatWrapping,r[s.addmap3].blob=t})),t[a].addmap4&&(i++,e.folder("textures").folder("loc").file(t[a].addmap4).async("arraybuffer").then(function(e){var a=new Uint8Array(e),t=new Blob([a.buffer]),n=new Image;n.onload=function(){u++,h(),document.body.appendChild(this),console.log("addmap4",u)},n.src=URL.createObjectURL(t),r[s.addmap4]=new p.Texture(n),r[s.addmap4].needsUpdate=!0,r[s.addmap4].wrapS=r[s.addmap4].wrapT=p.RepeatWrapping,r[s.addmap4].blob=t}))};for(var g in t)f(g)})})},!1),i.readAsBinaryString(n);break;default:alert("bad format")}e.target.value=""}},t.scene=r,t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement("label",null,"Import",c.a.createElement("input",{type:"file",name:"file",onChange:this.toggle,className:"hidden"}))}}]),a}(o.Component),R=t(74),L=function(e){function a(e){var t,r=e.scene;return Object(n.a)(this,a),(t=Object(l.a)(this,Object(i.a)(a).call(this))).toggle=function(e){var a=new O.a,n=a.folder("textures").folder("loc"),r=a.folder("geometry").folder("loc"),l=function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var t in a)void 0!==a[t]&&(e[t]=a[t]);return e}for(var n=[],r=0;r<this.vertices.length;r++){var l=this.vertices[r];n.push(l.x,l.y,l.z)}var i=[],s=[],o={},c=[],d={},m=[],p={},u=[],h={};for(r=0;r<this.faces.length;r++){var f=this.faces[r],g=void 0!==this.faceVertexUvs[0][r],v=void 0!==this.faceVertexUvs[1],b=f.normal.length()>0,w=f.vertexNormals.length>0,M=1!==f.color.r||1!==f.color.g||1!==f.color.b,x=f.vertexColors.length>0,y=0;if(y=D(y,0,0),y=D(y,1,!0),y=D(y,2,!1),y=D(y,3,g),y=D(y,4,b),y=D(y,5,w),y=D(y,6,M),y=D(y,7,x),i.push(y),i.push(f.a,f.b,f.c),i.push(f.materialIndex),g){var E=this.faceVertexUvs[0][r];i.push(R(E[0]),R(E[1]),R(E[2]))}if(v){var S=this.faceVertexUvs[1][r];i.push(L(S[0]),L(S[1]),L(S[2]))}else console.log("no uv2");if(b&&i.push(O(f.normal)),w){var T=f.vertexNormals;i.push(O(T[0]),O(T[1]),O(T[2]))}if(M&&i.push(C(f.color)),x){var U=f.vertexColors;i.push(C(U[0]),C(U[1]),C(U[2]))}}function D(e,a,t){return t?e|1<<a:e&~(1<<a)}function O(e){var a=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==o[a]?o[a]:(o[a]=s.length/3,s.push(e.x,e.y,e.z),o[a])}function C(e){var a=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==d[a]?d[a]:(d[a]=c.length,c.push(e.getHex()),d[a])}function R(e){var a=e.x.toString()+e.y.toString();return void 0!==p[a]?p[a]:(p[a]=m.length/2,m.push(e.x,e.y),p[a])}function L(e){var a=e.x.toString()+e.y.toString();return void 0!==h[a]?h[a]:(h[a]=u.length/2,u.push(e.x,e.y),h[a])}return e.data={},e.data.vertices=n,e.data.normals=s,c.length>0&&(e.data.colors=c),m.length>0&&(e.data.uvs=[m]),u.length>0&&e.data.uvs.push(u),console.log(u),e.data.faces=i,e},i={},s=[],o={obj:s,z:20},c=[];for(var d in t.scene.children){var m=t.scene.children[d],u=m.userData,h={};if(h.scale=u.scale,h.geo=m.name+".js",h.buffer="1"===u.buffer,u.map&&(h.map=u.map,-1===c.indexOf(u.map)))if(c.push(u.map),-1!==m.basicMaterial.map.image.src.indexOf("blob"))n.file(u.map,m.basicMaterial.map.blob);else{var f=m.basicMaterial.map.image.src.split(",");n.file(u.map,f[1],{base64:!0})}if(u.alpha&&(h.alpha=u.alpha,-1===c.indexOf(u.alpha)))if(c.push(u.alpha),-1!==m.basicMaterial.alphaMap.image.src.indexOf("blob"))n.file(u.alpha,m.basicMaterial.alphaMap.blob);else{var g=m.basicMaterial.alphaMap.image.src.split(",");n.file(u.alpha,g[1],{base64:!0})}if(u.lightmap&&(h.lightmap=u.lightmap,-1===c.indexOf(u.lightmap)))if(c.push(u.lightmap),-1!==m.basicMaterial.lightMap.image.src.indexOf("blob"))n.file(u.lightmap,m.basicMaterial.lightMap.blob);else{var v=m.basicMaterial.lightMap.image.src.split(",");n.file(u.lightmap,v[1],{base64:!0})}if(u.mixmap&&(h.mixmap=u.mixmap,-1===c.indexOf(u.mixmap)))if(c.push(u.mixmap),console.log(m.shaderMaterial.uniforms.mixMap.value,m.shaderMaterial.uniforms.mixMap.value.blob),-1!==m.shaderMaterial.uniforms.mixMap.value.image.src.indexOf("blob"))console.log(u.mixmap,m.shaderMaterial.uniforms.mixMap.value.blob),n.file(u.mixmap,m.shaderMaterial.uniforms.mixMap.value.blob);else{var b=m.shaderMaterial.uniforms.mixMap.value.image.src.split(",");n.file(u.mixmap,b[1],{base64:!0})}if(u.addmap1&&(h.addmap1=u.addmap1,-1===c.indexOf(u.addmap1)))if(c.push(u.addmap1),-1!==m.shaderMaterial.uniforms.addMap1.value.image.src.indexOf("blob"))n.file(u.addmap1,m.shaderMaterial.uniforms.addMap1.value.blob);else{var w=m.shaderMaterial.uniforms.addMap1.value.image.src.split(",");n.file(u.addmap1,w[1],{base64:!0})}if(u.addmap2&&(h.addmap2=u.addmap2,-1===c.indexOf(u.addmap2)))if(c.push(u.addmap2),-1!==m.shaderMaterial.uniforms.addMap2.value.image.src.indexOf("blob"))n.file(u.addmap2,m.shaderMaterial.uniforms.addMap2.value.blob);else{var M=m.shaderMaterial.uniforms.addMap2.value.image.src.split(",");n.file(u.addmap2,M[1],{base64:!0})}if(u.addmap3&&(h.addmap3=u.addmap3,-1===c.indexOf(u.addmap3)))if(c.push(u.addmap3),-1!==m.shaderMaterial.uniforms.addMap3.value.image.src.indexOf("blob"))n.file(u.addmap3,m.shaderMaterial.uniforms.addMap3.value.blob);else{var x=m.shaderMaterial.uniforms.addMap3.value.image.src.split(",");n.file(u.addmap3,x[1],{base64:!0})}if(u.addmap4&&(h.addmap4=u.addmap4,-1===c.indexOf(u.addmap4)))if(c.push(u.addmap4),-1!==m.shaderMaterial.uniforms.addMap4.value.image.src.indexOf("blob"))n.file(u.addmap4,m.shaderMaterial.uniforms.addMap4.value.blob);else{var y=m.shaderMaterial.uniforms.addMap4.value.image.src.split(",");n.file(u.addmap4,y[1],{base64:!0})}h.side=parseInt(u.side),"1"===u.shadows&&(h.shadows=!0),u.alphaTest>0&&(h.alphaTest=u.alphaTest),"1"===u.transparent&&(h.transparent=!0),h.opacity=u.opacity,h.color=parseInt(u.color,"16"),"1"===u.collider&&(h.collider=!0),"1"===u.wirframe&&(h.wirframe=!0),h.pos=u.pos,h.rot=u.rot,i[m.name]=h,s.push({id:m.name});var E=void 0;"BufferGeometry"===m.geometry.type?(E=new p.Geometry).fromBufferGeometry(m.geometry):E=m.geometry,E.toJSON=l,r.file(m.name+".js",JSON.stringify(E.toJSON().data))}a.file("assets.js",JSON.stringify(i)),a.file("locations.js",JSON.stringify(o)),a.generateAsync({type:"blob"}).then(function(e){Object(R.a)(e,"export.zip")})},t.scene=r,t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this.toggle}," Export ")}}]),a}(o.Component),j=function(e){function a(e){var t,r=e.scene;return Object(n.a)(this,a),(t=Object(l.a)(this,Object(i.a)(a).call(this))).toggle=function(e){m.a.render(c.a.createElement("div",null),document.getElementById("ui")),t.scene.children=[]},t.scene=r,t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this.toggle},"Reset")}}]),a}(o.Component),A=t(140),I=t(141),W=t(142),B=t(143),z=t(144),P=function(e){function a(e){var t,r=e.scene;return Object(n.a)(this,a),(t=Object(l.a)(this,Object(i.a)(a).call(this))).importOBJ=function(){console.log("import obj")},t.importDAE=function(){console.log("import DAE")},t.toggle=function(){t.setState({isOpen:!t.state.isOpen})},t.setSceneWirframe=function(){t.setState({sceneWirframe:!t.state.sceneWirframe}),t.scene.parent.children[1].visible=!t.state.sceneWirframe,console.log(t.scene.parent.children,t.state.sceneWirframe)},t.state={importDropdownOpen:!1,sceneWirframe:!0},t.scene=r,t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(A.a,{color:"light",light:!0,expand:"md"},c.a.createElement("label",null,c.a.createElement(E.a,{addon:!0,type:"checkbox","aria-label":"Show scene wirframe",checked:this.state.sceneWirframe,onChange:this.setSceneWirframe}),"Show scene wirframe"),c.a.createElement(I.a,{onClick:this.toggle}),c.a.createElement(v.a,{isOpen:this.state.isOpen,navbar:!0},c.a.createElement(W.a,{className:"ml-auto",navbar:!0},c.a.createElement(B.a,null,c.a.createElement(z.a,null,"  ",c.a.createElement(C,{scene:this.scene}))),c.a.createElement(B.a,null,c.a.createElement(z.a,null,c.a.createElement(L,{scene:this.scene}))),c.a.createElement(B.a,null,c.a.createElement(z.a,null,c.a.createElement(j,{scene:this.scene})))))))}}]),a}(o.Component),k=t(128)(p),G=new p.Scene,H=new p.Group;G.add(H);var F=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(s)))).onWindowResize=function(){t.camera.aspect=window.innerWidth/window.innerHeight,t.camera.updateProjectionMatrix(),t.renderer.setSize(window.innerWidth,window.innerHeight)},t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=new p.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,3e4);this.camera=e;var a=new p.WebGLRenderer;this.renderer=a,a.setSize(window.innerWidth,window.innerHeight),this.mount.appendChild(a.domElement),e.position.z=150,e.position.y=150;for(var t=new p.Geometry,n=-2500;n<=2500;n+=50)t.vertices.push(new p.Vector3(-2500,0,n)),t.vertices.push(new p.Vector3(2500,0,n)),t.vertices.push(new p.Vector3(n,0,-2500)),t.vertices.push(new p.Vector3(n,0,2500));var r=new p.LineBasicMaterial({color:16777215,opacity:.5,transparent:!0}),l=new p.LineSegments(t,r);G.add(l);var i=new k(e,a.domElement);window.addEventListener("resize",this.onWindowResize,!1),function t(){requestAnimationFrame(t),i.update(),a.render(G,e)}()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{ref:function(a){return e.mount=a}})}}]),a}(o.Component),J=document.getElementById("root");m.a.render(c.a.createElement(F,null),J),m.a.render(c.a.createElement(P,{scene:H}),document.getElementById("menu"))},41:function(e,a,t){},76:function(e,a,t){e.exports=t(129)},94:function(e,a){},96:function(e,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.f8543eea.chunk.js.map